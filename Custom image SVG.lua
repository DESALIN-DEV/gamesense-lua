-- Автор t.me/desalin

local callback = client.set_event_callback
local checkbox = ui.new_checkbox
local getui = ui.get
local button = ui.new_button
local color = ui.new_color_picker
local slider = ui.new_slider
local combo = ui.new_combobox
local visible = ui.set_visible
local ui_set_callback = ui.set_callback
local images = require("images")

local w, h = client.screen_size()

local menu = 
{
    custom_image_enable = checkbox("LUA", "B", "Enable Custom Image"),
    custom_image_xpos = slider("LUA", "B", "X Position (Custom Image)", 0, w, w / 2, true),
    custom_image_ypos = slider("LUA", "B", "Y Position (Custom Image)", 0, h, h / 2, true),
    size_button_50 = button("LUA", "B", "Size - 50", function() set_image_size(50) end),
    size_button_132 = button("LUA", "B", "Size - 132", function() set_image_size(132) end),
    size_button_188 = button("LUA", "B", "Size - 188", function() set_image_size(188) end),
    size_button_351 = button("LUA", "B", "Size - 351", function() set_image_size(351) end),
    size_button_512 = button("LUA", "B", "Size - 512", function() set_image_size(512) end),
    custom_image_color = color("LUA", "B", "Color (Custom Image)", 255, 255, 255, 255),
}

local custom_image = nil
local custom_image_size = 128 -- Установленный размер по умолчанию

-- Вставьте данные изображения (base64 или строку) сюда
local custom_image_data = [[
<?xml version="1.0" encoding="UTF-8"?>
<svg width="534" height="554" viewBox="0 0 534 554" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M34.0774 0.642578C34.0774 1.08582 35.481 1.60291 37.2539 1.89844C51.1416 4.26227 87.3384 19.7752 107.062 31.89C114.745 36.6917 127.82 49.102 130.11 53.9036C131.735 57.4494 132.252 57.8926 137.792 60.552C147.691 65.2058 162.244 77.4684 168.523 86.4807C169.483 87.8842 173.324 92.4642 177.018 96.6749C190.462 112.114 192.9 115.66 192.9 120.24C192.9 123.047 194.525 124.45 196.963 123.859C199.327 123.268 201.026 119.944 201.1 115.512C201.1 112.336 201.174 112.188 201.912 113.813C204.424 119.944 201.912 126.371 194.008 134.201C189.428 138.707 187.36 139.668 182.41 139.668C181.228 139.668 179.012 140.406 177.387 141.293C174.802 142.844 174.285 142.844 171.699 141.958C167.784 140.554 164.903 138.412 164.386 136.417C164.164 135.531 162.982 134.201 161.8 133.463C159.363 132.059 155.374 126.297 152.862 120.609C151.754 118.171 151.237 117.506 151.015 118.467C150.424 120.831 153.601 129.4 158.55 139.225C162.761 147.572 163.721 148.902 166.159 150.084C169.557 151.783 171.699 154.516 173.694 159.613C175.023 162.937 175.171 165.079 175.171 179.115C175.171 187.758 174.949 195.957 174.728 197.287C174.432 198.543 173.103 200.833 171.773 202.236C169.335 204.822 169.114 204.896 165.272 204.379C163.056 204.157 161.062 204.231 160.84 204.6C160.618 204.97 157.737 206.299 154.487 207.629C149.685 209.55 147.839 210.806 144.884 214.056C140.304 219.079 139.935 221.369 144.293 217.602C145.992 216.198 149.168 214.13 151.311 213.169C157.146 210.362 161.209 210.879 164.238 214.721C165.051 215.755 166.75 216.567 168.744 216.863C172.881 217.602 175.319 218.931 177.756 221.812C180.416 224.915 183.297 231.12 183.223 233.484C183.223 234.961 182.854 234.592 181.376 231.489C178.791 226.245 175.023 222.034 173.472 222.625C171.773 223.29 171.921 225.949 173.694 228.682C175.097 230.751 175.171 232.228 175.171 255.719C175.171 277.733 175.023 281.057 173.767 285.858C172.955 288.813 171.625 291.99 170.813 292.876L169.261 294.501L171.995 298.047C174.506 301.297 174.728 301.962 174.949 307.576L175.245 313.634L171.699 317.845C169.778 320.135 167.858 322.055 167.415 322.055C166.011 322.129 134.173 289.33 132.695 286.302C130.775 282.313 129.371 280.761 127.746 280.761C125.825 280.761 119.177 277.289 117.035 275.147C114.523 272.635 115.779 271.158 120.433 271.158C123.018 271.158 124.569 270.641 126.49 269.237C127.894 268.203 129.74 267.021 130.701 266.652C134.246 265.248 145.401 257.418 148.799 253.872C152.936 249.735 156.408 244.786 155.743 244.047C155.447 243.826 153.822 244.934 152.123 246.485C142.003 255.793 130.775 260.004 116 260.077C109.278 260.077 106.249 259.117 105.141 256.679C103.959 254.168 101.005 252.912 99.3793 254.242C98.419 255.054 98.2713 256.088 98.5668 259.708C98.9361 264.14 98.9361 264.14 97.6064 262.441C95.9813 260.521 95.021 255.202 95.6119 251.582C96.4245 246.633 102.556 237.547 109.5 230.972C115.779 225.136 116.074 224.619 116.074 221.665C116.074 219.966 116.887 216.567 117.847 214.056C120.802 206.669 122.501 201.055 124.126 193.594C125.013 189.752 126.564 183.03 127.524 178.672C130.627 165.375 129.888 146.39 125.382 125.189C122.205 110.267 114.449 96.6749 102.482 85.0032C97.0155 79.7584 97.1632 81.6052 102.63 87.8842C111.346 97.709 116.222 108.864 119.029 125.263C119.842 129.991 120.506 136.787 120.506 140.259C120.506 147.646 119.251 161.755 118.29 165.523C115.04 178.228 114.227 181.109 113.119 184.36C108.022 198.912 94.1345 222.182 85.3439 230.825C80.9116 235.109 73.0813 239.911 67.2455 241.831C66.359 242.127 65.9158 243.604 65.5464 247.298C65.1032 251.361 64.4384 253.281 62.0745 257.27C58.3071 263.475 56.3126 265.47 51.2894 267.982C48.9994 269.164 46.7832 270.863 46.1923 271.971C44.7148 274.925 39.6916 278.841 33.4126 282.091C25.6561 286.154 11.0297 291.103 5.48935 291.62C0.096766 292.137 -0.494202 292.95 3.86419 293.615C12.7287 295.018 29.719 291.103 49.9597 282.904C58.1594 279.653 60.5232 278.988 66.2113 278.619L72.7858 278.176L74.411 275.295C78.1784 268.573 81.5026 269.311 91.3274 278.988C95.021 282.608 101.226 288.739 105.289 292.581C114.892 301.888 120.506 307.946 121.245 310.014C121.688 311.048 123.757 312.674 126.712 314.151C132.991 317.327 139.861 323.533 146.805 332.249L152.419 339.267L150.646 341.705C149.759 343.035 143.85 349.757 137.645 356.701C126.859 368.742 123.387 371.623 119.915 371.623C119.029 371.623 117.478 371.992 116.37 372.435C109.943 374.873 102.777 366.008 102.777 355.519C102.704 349.683 101.522 352.047 100.857 359.286C100.487 363.645 100.709 366.452 101.743 371.327C102.999 376.941 103.368 377.828 105.437 379.084C108.318 380.856 109.721 384.107 109.13 387.357C108.539 390.607 101.817 398.659 95.3164 403.978C92.5093 406.268 90.2193 408.41 90.2193 408.78C90.2193 409.371 93.1742 409.149 98.6406 408.041C102.113 407.376 100.192 409.149 96.0552 410.331C90.0716 412.104 84.0142 412.547 79.0648 411.513C76.6271 410.996 74.4848 410.257 74.2632 409.962C73.3768 408.484 72.0471 409.518 70.7174 412.695C69.9787 414.542 67.541 418.605 65.251 421.707C59.489 429.759 51.511 441.8 50.1813 444.385C48.1129 448.375 45.2319 458.273 44.05 465.291C43.0897 471.348 43.0897 472.383 44.05 474.155L45.0842 476.15L45.1581 473.638C45.2319 467.655 49.8858 455.54 54.5397 449.187C58.9719 443.204 65.8419 437.072 71.53 434.191C74.7803 432.492 79.7297 432.64 82.7584 434.487L85.1961 435.964L87.7077 433.379C90.9581 430.055 96.8677 427.321 106.028 424.957C113.119 423.111 114.375 423.037 131.956 423.037C153.453 423.111 162.244 424.145 179.529 428.577C198.957 433.6 219.42 444.459 229.318 455.023C231.239 457.091 233.012 458.79 233.16 458.79C235.154 458.79 227.102 447.931 221.636 443.277C212.993 435.89 201.1 428.208 187.877 421.485C177.683 416.388 171.773 414.172 162.465 411.882C156.038 410.331 154.709 409.74 151.163 406.637C141.486 398.364 134.911 386.101 137.497 381.226C139.491 377.532 146.657 370.884 149.981 369.628C154.709 367.929 155.004 367.634 155.521 363.497C156.038 359.434 160.249 353.376 164.312 350.865C167.119 349.166 172.512 349.018 175.171 350.569C176.944 351.604 176.944 351.604 173.62 351.677C166.971 351.677 166.085 356.627 172.438 358.474C174.137 358.917 176.722 360.099 178.126 360.985C181.745 363.201 189.945 371.623 192.161 375.316C193.195 377.015 195.116 380.044 196.446 382.112C199.327 386.618 200.065 390.46 198.81 394.966C196.889 401.836 191.644 405.234 181.819 406.268L177.756 406.711L181.376 408.041C186.178 409.666 190.905 409.666 196.224 407.819C198.588 407.007 201.321 406.342 202.355 406.342C203.316 406.342 205.31 405.308 206.714 404.126C208.708 402.279 209.89 401.91 212.771 401.91C216.243 401.91 216.686 402.205 225.108 409.149C249.042 428.725 261.748 445.05 263.668 458.495C264.185 462.041 264.407 462.262 269.356 464.405C271.351 465.291 276.891 470.314 285.977 479.474C307.695 501.414 319.884 512.199 335.84 523.649C345.591 530.593 350.393 533.474 366.497 541.821C379.424 548.617 389.397 552.902 394.125 553.788C398.483 554.527 397.005 553.271 388.067 548.322C372.185 539.605 352.535 525.57 341.085 514.932C333.403 507.693 321.805 494.765 313.827 484.571C309.912 479.548 304.888 473.121 302.598 470.314C297.575 464.183 295.285 459.825 294.177 454.21C293.438 450.812 292.774 449.704 290.705 448.079C281.841 441.357 256.134 408.336 252.735 399.324C252.292 398.068 251.11 397.33 248.894 396.739C241.803 394.818 239.513 392.971 222.153 375.759C211.22 364.9 204.645 357.809 204.128 356.331C201.691 349.609 201.617 349.461 199.031 348.796C195.116 347.688 190.684 344.734 186.473 340.449C181.081 334.983 180.859 333.136 184.922 328.113C191.792 319.544 191.57 319.691 197.406 320.061C202.577 320.356 202.725 320.43 205.606 323.606C209.152 327.669 208.93 327.448 212.254 330.403C213.732 331.732 216.317 335.352 217.942 338.528C219.567 341.631 221.045 343.995 221.193 343.773C222.079 342.887 218.385 332.619 214.323 324.641C210.998 318.214 209.225 315.555 207.674 314.668C203.02 312.083 200.361 308.537 198.514 302.184C196.815 296.422 196.815 254.906 198.514 248.923C201.543 238.212 202.725 237.621 222.448 237.842C234.046 237.916 237.887 238.212 242.32 239.32C250.519 241.462 250.963 242.127 250.667 252.173C250.445 261.998 249.337 267.686 247.343 269.459C246.383 270.419 244.905 270.715 242.32 270.641C235.893 270.345 228.58 265.396 226.733 259.93C225.994 257.861 224.665 257.123 224.665 258.748C224.665 259.265 225.625 261.703 226.733 264.14C229.54 269.976 237.592 277.363 242.024 278.028C248.303 279.062 251.184 285.785 251.258 299.451C251.258 306.838 250.224 309.793 246.383 313.634L244.019 315.998L248.377 320.725C252.883 325.601 257.242 332.988 257.094 335.721C257.094 336.829 256.946 336.977 256.651 336.165C256.429 335.574 255.247 333.653 254.065 331.88C250.076 326.044 247.195 328.925 250.593 335.426C252.366 338.824 252.218 342.222 250.002 349.314C248.303 354.558 240.547 363.054 234.637 366.156C230.796 368.225 229.097 369.924 231.904 369.111C232.569 368.889 235.819 368.151 239.069 367.486C246.161 366.082 248.525 365.122 254.213 361.502C257.537 359.36 258.867 357.956 259.753 355.74C261.822 350.495 273.124 339.858 276.67 339.858C278.516 339.858 285.977 336.312 285.977 335.426C285.977 335.13 284.722 334.983 283.17 335.204C279.477 335.721 276.079 333.948 274.454 330.772C273.345 328.704 273.198 324.493 273.124 291.842L273.05 255.276L275.045 250.991L277.039 246.781L275.045 242.496L273.05 238.285V206.373V174.461L275.562 171.875C276.965 170.398 278.59 169.216 279.107 169.216C279.625 169.216 282.358 166.926 285.165 164.119C290.41 158.948 293.512 153.925 294.399 149.271L294.916 146.686L292.7 150.157C291.444 152.078 288.711 154.959 286.642 156.658C283.244 159.391 282.505 159.613 278.516 159.613C272.385 159.613 266.18 156.658 259.827 150.748C257.094 148.163 253.844 144.617 252.735 142.918L250.593 139.889L241.507 138.19C236.484 137.304 231.239 136.27 229.835 135.9C226.364 135.014 221.71 135.088 221.71 135.974C221.71 136.344 222.301 136.713 222.965 136.713C223.63 136.713 226.955 138.043 230.279 139.668C237.444 143.14 242.985 148.163 245.348 153.334C246.974 156.954 246.974 158.135 245.275 162.346C244.388 164.488 244.462 164.932 245.57 166.04C246.678 167.222 246.974 167.222 247.934 166.187C248.599 165.523 249.928 163.085 250.889 160.647C252.218 157.397 252.809 156.658 253.179 157.618C254.065 159.908 251.332 168.625 248.156 173.427C245.201 178.007 245.201 178.081 246.456 180.001C250.298 185.837 251.627 196.696 249.411 203.271C248.377 206.225 248.377 206.89 249.411 209.771C250.741 213.539 250.889 220.335 249.707 222.625C248.673 224.546 244.536 229.052 243.723 229.052C243.428 229.052 244.24 227.353 245.496 225.284C247.417 222.255 247.638 221.443 246.826 220.926C246.235 220.556 245.275 220.556 244.536 221C242.467 222.108 238.552 221.738 235.08 220.113C231.904 218.71 231.608 218.71 228.801 219.892C224.738 221.517 204.35 222.329 201.1 221C197.554 219.448 197.185 217.528 197.48 199.799C197.702 183.99 197.775 183.547 199.696 179.336C200.804 176.973 202.725 173.501 203.981 171.728C205.163 169.881 206.197 168.33 206.197 168.256C206.197 168.182 204.719 168.108 202.946 168.108C200.139 168.108 199.179 167.665 196.963 165.523C191.866 160.647 192.014 157.692 197.628 151.709C200.583 148.532 202.06 147.498 204.276 147.129C205.827 146.907 207.379 146.168 207.674 145.577C207.97 144.986 209.004 142.77 209.964 140.702C210.925 138.634 214.249 134.127 217.351 130.729C220.454 127.331 226.659 120.387 231.091 115.29C237.223 108.273 239.66 105.983 241.285 105.687C244.166 105.17 244.61 102.954 242.098 101.994C241.064 101.624 239.143 101.476 237.814 101.772C234.711 102.363 235.671 100.885 239.143 99.7774C242.615 98.5955 244.831 99.1126 250.15 102.289C257.906 106.943 263.668 111.745 265.294 114.995C266.697 117.802 267.14 118.097 270.317 118.615C275.045 119.279 281.176 121.422 290.779 125.632C312.349 135.162 333.181 136.787 347.66 130.065C352.535 127.775 357.263 124.229 355.416 124.155C354.825 124.155 352.609 124.82 350.615 125.558C344.853 127.701 332.959 128.292 324.907 126.814C306.218 123.268 283.244 110.341 267.288 94.311C262.56 89.5833 259.384 85.3726 255.395 78.8719C254.508 77.3945 253.622 76.8774 251.849 76.8774C248.673 76.8774 239.586 72.3713 236.779 69.3426C234.415 66.831 230.574 60.4781 230.574 59.0746C230.574 58.6313 229.097 56.8584 227.324 55.1594C225.551 53.3865 222.965 49.619 221.414 46.5165C218.755 41.05 215.874 30.0433 215.8 25.1678C215.8 23.2471 215.578 22.8777 214.914 23.5426C213.732 24.7245 214.027 39.4249 215.431 48.511C216.022 52.5739 217.351 58.6313 218.385 62.0294C219.42 65.5013 220.232 69.5642 220.232 71.0416C220.232 73.2578 220.675 74.1442 222.448 75.4C225.92 77.8378 230.574 85.5204 230.574 88.6229C230.5 92.0948 228.358 96.7487 225.329 99.9991C223.926 101.476 221.71 103.988 220.38 105.613C219.05 107.312 217.277 108.642 216.539 108.642C215.726 108.642 211.737 104.948 206.788 99.6297C202.208 94.6804 195.264 87.2194 191.349 83.0826C183.888 75.0307 180.268 69.3426 178.643 62.7681L177.609 58.7791L164.386 52.1307C157.073 48.511 147.691 43.1184 143.406 40.2374C129.666 31.0036 113.045 21.5481 107.948 19.9968C106.914 19.6274 100.635 17.2635 93.9129 14.6042C77.6613 8.3252 54.8352 2.48938 37.9926 0.421021C35.5548 0.125488 34.0774 0.199402 34.0774 0.642578ZM135.576 394.596C137.571 396.148 140.452 401.023 140.452 402.87C140.452 403.461 139.861 404.495 139.048 405.16C136.684 407.302 132.474 408.041 125.16 407.45C115.779 406.785 115.335 405.899 120.876 399.472C123.831 395.926 125.604 394.523 127.672 393.932C131.956 392.824 133.434 392.897 135.576 394.596Z" fill="#FF3D3D"/>
<path d="M438.816 82.4177C437.856 83.378 434.236 86.9238 430.764 90.3219C424.042 96.8964 418.206 105.761 414.144 115.66C411.115 122.973 407.569 128.439 403.58 132.059L400.182 135.088L401.733 138.707C404.54 144.986 405.057 147.424 404.245 150.601C403.432 153.629 400.034 158.357 397.523 160.13C395.454 161.533 395.676 163.011 398.631 169.364C400.034 172.393 401.733 177.785 402.398 181.331C403.875 188.718 403.284 194.111 400.034 201.941C399.074 204.379 398.261 207.186 398.261 208.072C398.261 209.033 399.739 213.465 401.585 217.897C406.018 228.682 407.347 234.518 407.274 243.087C407.274 249.957 406.313 254.02 402.694 262.663C401.807 264.731 402.029 265.396 404.91 271.527C409.046 280.17 409.342 284.381 405.944 287.262C404.688 288.37 403.063 289.626 402.324 289.995C401.068 290.734 401.068 290.882 402.472 293.689C403.284 295.314 404.54 298.416 405.279 300.559C406.387 304.178 406.461 304.622 405.353 306.247C404.688 307.281 403.358 308.611 402.324 309.275C401.29 309.94 400.477 310.753 400.477 311.122C400.477 311.492 402.029 313.191 403.875 314.89C408.899 319.47 410.45 323.459 411.484 333.948L411.927 338.75L414.882 338.602C419.241 338.307 422.195 339.563 425.889 343.33C428.622 346.063 429.878 348.353 432.685 355.666C434.606 360.616 436.453 364.9 436.822 365.343C437.191 365.787 438.078 365.27 439.112 363.94L440.811 361.872L442.879 366.525C446.942 375.685 448.789 383.442 450.562 399.62C450.857 402.205 451.448 404.495 451.965 404.643C452.926 405.012 455.364 400.654 456.176 397.108C456.472 395.852 457.21 390.607 457.727 385.436C458.171 380.192 458.983 375.612 459.426 375.168C461.347 373.248 469.251 379.157 472.428 384.919C474.496 388.687 474.496 388.908 473.24 389.869C471.467 391.051 470.95 391.051 466.518 389.721C462.16 388.391 462.529 388.391 462.529 389.573C462.529 390.09 464.302 393.119 466.444 396.369C477.229 412.695 481.44 426.804 477.377 433.305C474.496 438.033 467.848 443.056 459.944 446.602C457.801 447.488 455.881 448.596 455.585 449.039C455.364 449.483 454.034 450.073 452.704 450.295C451.448 450.591 449.158 451.403 447.755 452.142C446.351 452.881 440.368 455.835 434.458 458.79C428.548 461.745 422.343 465.143 420.644 466.325C417.172 468.615 416.434 470.314 419.167 469.575C422.713 468.541 430.691 466.916 436.305 466.177C439.555 465.734 443.027 465.217 444.061 465.069C445.095 464.848 449.232 464.404 453.295 463.961C459.796 463.296 465.558 462.779 482.474 461.45C484.69 461.302 489.196 460.711 492.447 460.194C502.863 458.569 518.745 459.529 523.694 462.041C526.723 463.592 533.371 465.439 533.741 464.774C533.962 464.478 530.269 459.972 525.541 454.653C511.284 438.697 510.767 437.515 511.579 422.667C511.801 417.57 512.244 412.325 512.466 410.996C512.909 408.927 512.614 408.484 509.142 405.899C505.005 402.796 504.783 402.131 506.556 396.665L507.738 393.045L501.607 384.402C495.919 376.203 484.247 360.763 481.071 356.996C479.963 355.814 478.854 355.371 476.417 355.371C469.842 355.371 465.927 353.524 460.091 347.762C454.255 341.926 451.67 337.642 448.124 328.039L445.76 321.833L441.402 320.504C435.492 318.805 431.946 315.702 430.395 311.048C429.213 307.576 429.213 307.133 430.469 303.44C431.134 301.371 431.946 299.229 432.242 298.86C432.537 298.416 434.458 294.797 436.526 290.734C442.436 278.767 442.436 276.033 436.526 280.761C434.458 282.386 432.316 283.716 431.725 283.716C430.617 283.716 430.617 281.722 432.242 267.834C433.941 252.838 434.089 254.537 431.134 252.69C429.656 251.804 428.031 250.105 427.366 248.849C426.258 246.781 426.332 246.411 428.548 241.757C430.764 237.177 430.912 236.586 430.469 231.342C429.878 224.767 430.617 223.068 434.236 222.994C438.816 222.846 441.033 226.614 442.879 237.547C445.095 250.326 445.391 251.065 450.857 257.492C453.664 260.742 456.989 265.544 458.318 268.203C460.534 272.635 460.682 273.522 460.534 279.801C460.461 287.188 460.534 287.41 464.228 286.006C466.592 285.12 467.626 286.228 470.729 292.95C473.24 298.49 473.831 304.769 472.649 313.634L472.058 318.14L474.57 319.026C475.9 319.47 477.894 320.799 478.928 321.907C480.036 323.089 486.242 334.687 492.742 347.762C505.891 374.134 513.648 387.135 513.5 382.482C513.426 382.038 512.983 380.413 512.466 379.01C504.931 359.286 502.936 352.564 502.936 346.137C502.936 340.227 503.749 338.307 507.738 334.761C510.841 332.028 511.062 330.993 509.437 327.078C507.664 322.72 507.295 316.81 508.698 315.111C509.363 314.299 510.028 313.929 510.25 314.373C512.392 319.1 517.858 327.669 518.671 327.669C520.001 327.669 519.853 324.123 518.375 319.174C517.785 317.327 516.824 313.855 516.085 311.418C515.421 308.98 513.574 303.144 511.949 298.49C506.925 283.421 504.857 274.704 503.897 263.919C502.789 251.434 504.192 246.411 507.664 250.77C508.477 251.804 509.659 252.69 510.25 252.69C511.949 252.69 511.505 245.008 509.363 237.916C508.329 234.444 506.852 229.495 506.039 226.835C505.3 224.176 504.266 218.562 503.749 214.277C502.493 202.458 504.635 193.003 511.653 179.189C513.795 175.126 516.085 170.767 516.898 169.438C517.637 168.182 518.006 166.852 517.785 166.557C517.489 166.261 514.83 167.443 511.949 169.142C509.068 170.767 506.334 172.171 505.891 172.171C504.562 172.171 506.113 164.562 508.551 159.613C510.693 155.107 516.898 145.651 521.7 139.594C522.882 138.116 523.842 136.639 523.842 136.417C523.842 134.792 517.563 138.486 505.744 146.981C498.8 152.004 493.481 155.181 491.856 155.181C490.674 155.181 490.674 155.033 491.782 153.334C492.447 152.3 492.816 151.265 492.594 151.044C492.373 150.822 490.452 151.192 488.31 151.783C480.627 154.073 475.456 153.038 469.99 148.163C467.626 146.021 466.887 145.651 466.518 146.538C465.927 148.237 467.922 151.561 472.354 156.067C477.525 161.386 479.815 166.187 479.224 170.546C478.781 173.796 474.644 182.513 473.61 182.513C472.132 182.513 472.28 185.394 474.053 189.826C475.752 194.111 475.974 195.366 475.604 200.611C475.383 204.674 474.718 207.629 473.536 210.067C471.984 213.243 471.911 213.834 472.797 217.011C474.274 222.625 474.496 228.756 473.757 238.285L472.945 247.15L476.638 250.77C479.002 253.207 480.406 255.276 480.701 256.975C481.218 259.856 480.332 264.657 479.15 265.027C478.781 265.101 476.417 261.629 473.979 257.344C465.853 242.792 464.524 238.876 466.149 234.149C466.961 231.859 466.814 231.637 461.864 226.466C456.102 220.335 453.812 216.789 451.079 209.623C448.494 202.68 448.567 201.719 451.818 201.719C453.221 201.719 454.403 201.424 454.403 201.054C454.403 199.577 450.193 195.44 444.504 191.525C433.645 183.916 430.1 179.115 429.435 171.063L429.139 166.557L432.168 163.897C434.606 161.829 435.197 160.795 435.197 158.874C435.197 156.88 436.157 155.476 441.402 150.083C444.8 146.612 447.755 142.844 448.05 141.662C448.641 139.224 447.976 139.151 443.987 141.219C439.26 143.583 436.822 143.361 434.163 140.185C430.321 135.753 428.327 129.917 427.957 121.717C427.366 109.307 430.321 100.368 438.447 89.4354C442.805 83.5257 443.175 82.7131 441.624 81.3835C440.811 80.7925 440.22 81.0141 438.816 82.4177Z" fill="#FF3D3D"/>
<path d="M336.357 154.59C335.84 155.255 336.579 157.101 338.943 161.09C348.177 176.603 353.2 189.457 354.677 201.128C355.194 205.044 355.416 214.056 355.268 222.034C355.047 235.552 354.973 236.217 353.052 240.132C351.944 242.348 349.728 246.042 348.029 248.184C344.262 253.355 344.188 254.463 347.881 253.946C349.359 253.725 351.353 253.355 352.314 253.06C353.865 252.543 353.939 252.764 353.939 255.719C353.939 260.151 351.796 263.919 345.961 269.902L341.011 274.926L344.188 277.807C347.66 280.983 347.881 281.574 345.961 284.307C345.148 285.415 343.375 288.518 341.898 291.177C338.795 296.717 338.647 298.49 340.199 308.094C341.454 315.407 340.864 322.646 338.426 331.585C336.653 337.864 330.448 351.677 329.34 351.677C328.97 351.677 328.896 351.16 329.266 350.348C329.561 349.683 329.931 344.29 330.004 338.381C330.226 328.039 330.152 327.448 328.01 321.834L325.794 315.924L328.158 310.605L330.522 305.287L329.783 282.091C329.044 258.305 328.675 255.276 326.015 255.793C324.981 256.015 324.686 257.197 324.39 262.663C324.095 267.465 323.578 269.976 322.544 271.823C320.992 274.408 318.85 276.181 318.185 275.517C317.373 274.704 316.191 267.021 315.747 259.708C315.378 253.503 315.6 251.435 316.929 246.707C318.702 240.354 318.998 234.223 317.52 234.223C317.003 234.223 316.264 235.257 315.895 236.587C315.083 239.172 312.571 241.314 309.321 242.053L307.178 242.57L307.622 235.257C308.36 222.108 312.571 208.885 319.736 197.066C323.947 190.122 322.026 190.269 313.974 197.287L307.031 203.418L301.416 215.681C294.768 230.234 289.819 243.309 288.711 249.071C287.972 253.208 288.046 253.429 292.478 265.396C298.314 280.909 301.195 289.995 302.746 297.53C303.854 303.366 304.519 304.622 305.553 302.923C306.514 301.297 307.4 302.406 308.877 307.133C310.355 311.787 310.429 313.191 309.985 324.862C309.468 336.756 309.542 337.864 311.094 342.517C312.497 346.654 312.719 348.353 312.275 353.081C311.758 359.212 308.804 374.725 306.957 381.226C302.894 395.335 293.955 409.001 282.949 418.014C280.142 420.304 277.852 422.446 277.852 422.741C277.852 423.923 281.397 423.185 287.972 420.525C295.433 417.497 296.245 416.832 311.167 401.393C320.106 392.159 329.561 380.709 333.92 373.987C335.249 371.844 337.687 366.599 339.238 362.241C340.79 357.957 343.006 352.933 344.114 351.013C346.699 346.58 352.461 340.449 355.785 338.676C357.189 337.937 358.371 336.977 358.371 336.534C358.371 336.165 357.706 334.022 356.894 331.88C355.121 327.226 354.973 319.396 356.524 308.094C357.115 303.809 357.632 299.081 357.632 297.604C357.632 295.24 358.74 293.319 364.945 285.12C372.776 274.704 378.907 263.919 380.902 256.827C382.601 250.991 382.601 241.314 380.975 239.467C380.311 238.729 379.276 235.405 378.759 231.933C377.651 225.063 375.583 216.863 374.549 214.868C374.179 214.204 373.145 213.539 372.259 213.391C370.707 213.169 370.56 212.652 370.116 206.89C368.639 187.241 359.848 170.915 343.892 158.431C340.568 155.846 337.687 153.703 337.465 153.703C337.318 153.703 336.801 154.147 336.357 154.59Z" fill="#FF3D3D"/>
</svg>

]]

ui_set_callback(menu.custom_image_enable, function()
    local enabled = getui(menu.custom_image_enable)
    visible(menu.custom_image_xpos, enabled)
    visible(menu.custom_image_ypos, enabled)
    visible(menu.size_button_50, enabled)
    visible(menu.size_button_132, enabled)
    visible(menu.size_button_188, enabled)
    visible(menu.size_button_351, enabled)
    visible(menu.size_button_512, enabled)
    visible(menu.custom_image_color, enabled)
    if enabled then
        custom_image = images.load({
            ["custom_image"] = {
                custom_image_size,
                custom_image_size,
                custom_image_data
            }
        }).custom_image
    else
        custom_image = nil
    end
end)

function set_image_size(size)
    custom_image_size = size
    if custom_image then
        custom_image = images.load({
            ["custom_image"] = {
                custom_image_size,
                custom_image_size,
                custom_image_data
            }
        }).custom_image
    end
end

local function draw_custom_image()
    if not custom_image then return end

    local x = getui(menu.custom_image_xpos)
    local y = getui(menu.custom_image_ypos)
    local r, g, b, a = getui(menu.custom_image_color)

    custom_image:draw(x, y, custom_image_size, custom_image_size, r, g, b, a)
end

local function paint_hud(ctx)
    if getui(menu.custom_image_enable) then
        draw_custom_image()
    end
end

callback('paint', paint_hud)